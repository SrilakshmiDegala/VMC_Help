<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang xml:lang>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>FIR Halfband Interpolator Stream</title>
  <style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
width: 0.8em;
margin: 0 0.8em 0.2em -1.6em;
vertical-align: middle;
}
.display.math{display: block; text-align: center; margin: 0.5rem auto;}
</style>
  <style type="text/css">body {font-family: arial, helvetica, sans-serif;font-size: 10pt;font-weight: normal;}#title-block-header {display:none;}.level1{margin-left: 0px;}.level2{margin-left: 0px;}.level3{margin-left: 15px;}.level4{margin-left: 15px;}h4 {color:#c06838;}.level5{margin-left: 15px;}.level6{margin-left: 15px;}table {border-spacing: 2px;display: block;font-size: 14px;overflow: auto;width: 100%;margin-bottom: 16px;border-spacing: 0;border-collapse: collapse;}td {padding: 6px 13px;border: 1px solid #dfe2e5;}th {font-weight: 600;padding: 6px 13px;border: 1px solid #dfe2e5;}tr {background-color: #fff;border-top: 1px solid #c6cbd1;}table tr:nth-child(2n) {background-color: #f6f8fa;}.noteBox::before{content: "NOTE:";font-weight: bold;font-size: 11pt;color: #0096C7;}.noteBox{border: 2px solid;border-radius: 5px;padding: 10px;margin: 10px 0;width: 80%;border-color: #0096C7;background-color: rgba(0, 150, 199, 0.1);}</style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">FIR Halfband Interpolator Stream</h1>
</header>
<section id="fir-halfband-interpolator-stream" class="level1">
<h1>FIR Halfband Interpolator Stream</h1>
<p>This block implements the stream-based FIR Halfband Interpolator
filter targeted for AI Engines.</p>
<p><img src="data:image/png;base64,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" /></p>
<section id="library" class="level2">
<h2>Library</h2>
<p>AI Engine/DSP/Stream IO</p>
</section>
<section id="description" class="level2">
<h2>Description</h2>
<p>This block implements the stream-based FIR Halfband Interpolator
filter targeted for AI Engines.</p>
</section>
<section id="parameters" class="level2">
<h2>Parameters</h2>
<section id="main" class="level3">
<h3>Main</h3>
<p>Input data type/Output data type<br />
Describes the type of individual data samples input to and output from
the filter function. int16, cint16, int32, cint32, float, cfloat.</p>
<section id="filter-coefficients-data-type" class="level4">
<h4>Filter coefficients data type</h4>
<p>Describes the type of individual coefficients of the filter taps. It
should be one of int16, cint16, int32, cint32, float, cfloat and must
also satisfy the following rules:</p>
<ul>
<li>Complex types are only supported when the Input/Output data type is
also complex.</li>
<li>32-bit types are only supported when the Input/Output data type is
also a 32-bit type.</li>
<li>Filter coefficients data type must be an integer type if the
Input/Output data type is an integer type.</li>
<li>Filter coefficients data type must be a float type if the
Input/Output data type is a float type.</li>
</ul>
</section>
<section id="specify-filter-coefficients-via-input-port" class="level4">
<h4>Specify filter coefficients via input port</h4>
<p>When this option is enabled, the tool allows you to specify
reloadable filter coefficients via the input port.</p>
</section>
<section id="provide-second-set-of-input-ports" class="level4">
<h4>Provide second set of input ports</h4>
<p>When this option is enabled, a second stream input can be connected
to the FIR, increasing available throughput. When using a second stream
input, the data should be organized in a 128-bit interleaved pattern.
For example, for a cint16 input samples 0-3 should be sent over the
first stream and samples 4-7 should be sent over the second stream.</p>
</section>
<section id="provide-second-set-of-output-ports" class="level4">
<h4>Provide second set of output ports</h4>
<p>When this option is enabled, a second stream output is added to the
block. The two output data streams are interleaved in a 128-bit pattern.
For example, for cint16 output data, samples 0-3 will be sent on the
first output stream and samples 4-7 will be sent on the second output
stream.</p>
</section>
<section id="filter-coefficients" class="level4">
<h4>Filter coefficients</h4>
<p>Specifies the filter coefficients as a vector of (N+1)/4+1 elements,
where &#39;N&#39; is a positive integer that represents the filter length and
must be in the range 4 to 240 inclusive.</p>
</section>
<section id="input-frame-size-number-of-samples" class="level4">
<h4>Input frame size (Number of samples)</h4>
<p>Describes the number of samples used as an input to the filter
function. The number of values in the output window will be the Input
window size multiplied by two by virtue of the halfband interpolation
factor.</p>
</section>
<section id="scale-output-down-by-2" class="level4">
<h4>Scale output down by 2^</h4>
<p>Describes the power of 2 shift down applied to the accumulation of
FIR terms before output. It must be in the range 0 to 61.</p>
</section>
<section id="rounding-mode" class="level4">
<h4>Rounding mode</h4>
<p>Describes the selection of rounding to be applied during the shift
down stage of processing.</p>
<p>The following modes are available:</p>
<ul>
<li><strong>Floor:</strong> Truncate LSB, always round down (towards
negative infinity).</li>
<li><strong>Ceiling:</strong> Always round up (towards positive
infinity).</li>
<li><strong>Round to positive infinity:</strong> Round halfway towards
positive infinity.</li>
<li><strong>Round to negative infinity:</strong> Round halfway towards
negative infinity.</li>
<li><strong>Round symmetrical to infinity:</strong> Round halfway
towards infinity (away from zero).</li>
<li><strong>Round symmetrical to zero:</strong> Round halfway towards
zero (away from infinity).</li>
<li><strong>Round convergent to even:</strong> Round halfway towards
nearest even number.</li>
<li><strong>Round convergent to odd:</strong> Round halfway towards
nearest odd number.</li>
</ul>
<p>No rounding is performed on the <strong>Floor</strong> or
<strong>Ceiling</strong> modes. Other modes round to the nearest
integer. They differ only in how they round for values that are exactly
between two integers.</p>
</section>
<section id="saturation-mode" class="level4">
<h4>Saturation mode</h4>
<p>Describes the selection of saturation to be applied during the shift
down stage of processing.</p>
<p>The following modes are available:</p>
<ul>
<li><strong>None:</strong> No saturation is performed and the value is
truncated on the MSB side.</li>
<li><strong>Asymmetric:</strong> Rounds an n-bit signed value in the
range <code>-2^(n-1)</code> to <code>2^(n-1)-1</code>.</li>
<li><strong>Symmetric:</strong> Rounds an n-bit signed value in the
range <code>-2^(n-1)-1</code> to <code>2^(n-1)-1</code>.</li>
</ul>
</section>
<section id="number-of-parallel-inputoutput-ssr" class="level4">
<h4>Number of parallel input/output (SSR)</h4>
<p>This parameter specifies the number of input (or output) ports and
must be of the form 2^N, where N is a non-negative integer.</p>
</section>
<section id="number-of-interpolator-polyphases" class="level4">
<h4>Number of interpolator polyphases</h4>
<p>Specifies the number of interpolator polyphases over which the
coefficients will be split to enable parallel computation of the
outputs. The polyphases are executed in parallel; output data is
produced by each polyphase directly. This parameter does not affect the
number of input data paths; there will be <code>(SSR)</code> input
phases irrespective of the value of this parameter.</p>
<p>Currently, only 2 interpolator polyphases are supported for the
halfband interpolators with SSR &gt; 1. Input data is broadcast to the
two polyphases and each polyphase produces half of the total output
data. Their output data can be interleaved to produce a single output
stream.</p>
<p>The first polyphase is implemented using a single rate asymmetric
filter that is configured to produce and consume data in parallel in
<code>(SSR)</code> phases; each phase can operate at maximum throughput
depending on the configuration. The first polyphase uses
<code>(SSR)^2 * (Number of cascade stages)</code> kernels. The second
polyphase simplifies into a single kernel that does a single tap because
halfband decimators only have one non-zero coefficient in the second
coefficient phase. The second polyphase uses <code>(SSR)</code> kernels
operating at maximum throughput.</p>
<p>The overall theoretical input data rate is
<code>(SSR) * (Number of output ports) * 1 GSa/s</code>. The overall
theoretical output data rate is
<code>(SSR) * (Number of decimator polyphases) * (Number of output ports) * 1GSa/s</code>.</p>
<p>When SSR = 1, 1 or 2 interpolator polyphases can be used.</p>
</section>
<section id="use-center-tap-to-upshift-data" class="level4">
<h4>Use center tap to upshift data</h4>
<p>To upshift the data sample by the center tap coefficient (or its real
part) position.</p>
<ul>
<li><p>When it is set to 0, the center tap coefficient will be treated
as any other coefficient.</p></li>
<li><p>When it is set to 1, the provided center tap&#39;s value will be used
to upshift the input data sample.</p>
<ul>
<li>taps[] = {c0, c2, c4, ..., cN, cCT} where N = (TP_FIR_LEN+1)/4 and
cCT is the center tap.</li>
</ul>
<p><strong>Note</strong>: When complex coefficients are used, the center
tap&#39;s real part will be used for the upshift.</p>
<p><strong>Note</strong>: Upshift is only supported with 16-bit
coefficient types (i.e., int16 and cint16).</p>
<p><strong>Note</strong>: When Upshift is enabled, the center tap value
must be in the range 0 to 47.</p></li>
</ul>
<section id="example-1" class="level6">
<h6><strong>Example 1</strong>:</h6>
<p>A 7-tap FIR halfband interpolator has coefficients (1, 0, 2, 5, 2, 0,
1). This would be input as taps[]= {1,2,5} because the context of
halfband interpolation allows the remaining coefficients to be
inferred.</p>
</section>
<section id="example-2" class="level6">
<h6><strong>Example 2</strong>:</h6>
<p>A 7-tap FIR halfband interpolator has coefficients (1, 2, 2, 1, 2, 1,
3). Here &#39;3&#39; is the center tap value.</p>
<p>Now, if the input has a data stream of all ones (i.e., 1, 1, 1,
etc.):</p>
<ul>
<li>If the parameter is unset, the expected output will be: [1, 3, 2,
3..]</li>
<li>If the parameter is set, the expected output will be: [1, 2^3, 2,
2^3...]=[1, 8, 2, 8..]</li>
</ul>
</section>
</section>
<section id="number-of-cascade-stages" class="level4">
<h4>Number of cascade stages:</h4>
<p>This determines the number of kernels the FIR will be divided over in
series to improve throughput.</p>
</section>
</section>
</section>
</section>
</body>
</html>
